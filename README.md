# Лабораторная работа №3 — потоковая интерполяция (Elixir)

Цель: повторно реализовать лабораторную работу по вычислительной математике (интерполяция) с упором на потоковую обработку данных, разделение ввода/вывода и функциональную архитектуру.

## Возможности
- **Алгоритмы**: линейная (отрезками) и Ньютонова интерполяции. Можно запускать сразу оба.
- **CLI-настройки**: выбор алгоритмов, шага дискретизации (`--step`), числа точек в формуле Ньютона (`--order`), точности вывода (`--precision`).
- **Потоки**: данные подаются на `stdin` в виде строк `x;y`, `x\ty` или `x y` (по возрастанию `x`). Результат выводится на `stdout` по мере появления достаточного окна точек.
- **Генератор точек**: отдельный компонент поддерживает равномерную сетку и гарантирует вывод крайней точки даже вне сетки.
- **Расширяемость**: алгоритмы реализуют единое поведение (`Fplab1.Interpolation.Algorithm`), что упрощает добавление новых методов интерполяции.

## Архитектура
```
stdin --(парсер)--> поток точек --+--> линейная интерполяция --+
                                 |                            |
                                 +--> Ньютонова интерполяция -+--> stdout
```
- `Fplab1.Input` — разбор строк ввода.
- `Fplab1.Sampler` — генератор запросов на интерполяцию.
- `Fplab1.Interpolation.Linear/Newton` — алгоритмы, работающие поверх `Sampler`.
- `Fplab1.StreamProcessor` — связывает парсер и набор алгоритмов, обеспечивает потоковый режим.
- `Fplab1.CLI` — парсинг аргументов, форматирование вывода, точка входа для escript.

## Использование
```bash
mix escript.build
./fplab1 --linear --step 0.7 < input.txt
./fplab1 --linear --newton -n 4 --step 0.5 < input.txt
```
или без сборки escript:
```bash
mix run -e 'Fplab1.CLI.main(["--linear", "--step", "0.5"])' < input.txt
```
Пример (линейная интерполяция, шаг 0.7):
```
$ printf "0 0\n1 1\n2 2\n3 3\n" | ./fplab1 --linear --step 0.7
linear: 0 0
linear: 0.7 0.7
linear: 1.4 1.4
linear: 2.1 2.1
linear: 2.8 2.8
linear: 3 3
```
Пример (Ньютон, 4 точки, шаг 0.5):
```
$ seq 0 5 | paste -d' ' - - | ./fplab1 --newton -n 4 --step 0.5
newton: 0 0
newton: 0.5 0.5
...
```

## Формат ввода
- Каждая строка — две вещественных величины `x` и `y`, разделённые пробелом/табуляцией/`;`.
- Строки сортируются по возрастанию `x`.
- Пустые строки и строки, начинающиеся с `#`, игнорируются.

## Тесты и CI
- `mix test` — юнит-тесты для парсера и потоковой обработки.
- `mix credo` — статический анализ.
- `.github/workflows/ci.yaml` — GitHub Actions: форматирование, Credo, тесты.

## Отчёт
Для отчёта можно использовать разделы: постановка задачи, описание архитектуры (см. выше), ключевые модули (с краткими комментариями в коде), демонстрация ввода/вывода, выводы о применённых приёмах функционального программирования.
