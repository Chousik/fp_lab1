# fp-lab-1
## Вариант rb-dict

Лабораторная работа посвящена реализации персистентного словаря, опирающегося на функциональную структуру `:gb_trees` из стандартной библиотеки Erlang. Структура соответствует требованиям: неизменяемость, поддержка полиморфных ключей/значений, операции высшего порядка и проверка свойств через property-based тестирование.

### Особенности реализации
- **Структура данных**: обёртка `Fplab1.RBDict` над сбалансированным деревом `:gb_trees`. Все операции возвращают новые экземпляры структуры без побочных эффектов.
- **API**: `new/0`, `put/3`, `delete/2`, `fetch/2`, `get/3`, `member?/2`, `map/2`, `filter/2`, `foldl/3`, `foldr/3`, `from_enum/1`, `to_list/1`, `concat/2`, `concat/1`, `equal?/2`.
- **Моноид**: `new/0` выступает идентичным элементом, а `concat/2`/`concat/1` обеспечивают ассоциативное объединение словарей с приоритетом правых значений.
- **Сравнение**: API `equal?/2` выполняет параллельный симметричный обход деревьев без преобразования к спискам.
- **Вспомогательные функции**: фильтрация и отображение значений, преобразования в/из перечислимых коллекций, свёртки в обоих направлениях.

### Тестирование
- **Unit tests**: проверяют корректность базовых операций словаря, порядок обхода для свёрток и поведение `equal?/2`.
- **Property-based tests** (StreamData):
  1. Соответствие `from_enum/1` семантике `Map` при произвольных наборах пар.
  2. Корректность `map/2` и `filter/2` относительно ожидаемого результата.
  3. Ассоциативность/идемпотентность моноида `concat` и согласованность `foldl`/`foldr` с `Enum.reduce`.

### Запуск
```bash
mix deps.get
mix test
```
Property-тесты запускаются вместе с обычными unit-тестами и покрывают случайные входные данные при каждом запуске.
